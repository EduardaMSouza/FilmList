<header class="minha-lista-header">
  <nav class="menu-navegacao">
    <a [routerLink]="['/inicio']" class="menu-item hide-mobile">Início</a>
    <a [routerLink]="['/filmes']" class="menu-item">Filmes</a>
    <a [routerLink]="['/mais-votados']" class="menu-item hide-mobile">Mais votados</a>
    <a [routerLink]="['/minha-lista']" class="menu-item hide-mobile">Minha Lista</a>
    <button class="menu-hamburguer" (click)="menuAberto = !menuAberto">&#9776;</button>
  </nav>
  <div class="search-bar-global">
    <img
      src="/loupe.png"
      alt="Lupa"
      class="loupe-global"
    />
    <input
      type="text"
      class="search-input-global"
      placeholder="Buscar..."
      [(ngModel)]="busca"
      (input)="filtrarFilmes()"
    />
  </div>
  <div class="menu-mobile" *ngIf="menuAberto">
    <a [routerLink]="['/inicio']" (click)="menuAberto = false">Início</a>
    <a [routerLink]="['/filmes']" (click)="menuAberto = false">Filmes</a>
    <a [routerLink]="['/mais-votados']" (click)="menuAberto = false">Mais votados</a>
    <a [routerLink]="['/minha-lista']" (click)="menuAberto = false">Minha Lista</a>
  </div>
</header>
<div class="minha-lista-container">
  <div class="sidebar-filtros">
    <h1>Minha Lista</h1>
    <hr />
    <h2>Filtros</h2>
    <hr class="hr-secundario" />
    <div class="filtro-titulo">Status</div>
    <div class="filtro-opcoes">
      <label for="assistido">
        <input 
          type="checkbox" 
          id="assistido" 
          [checked]="filtros.assistido"
          (change)="toggleFiltro('assistido')"
        />
        Assistindo
      </label>
      <label for="pra-assistir">
        <input 
          type="checkbox" 
          id="pra-assistir" 
          [checked]="filtros.praAssistir"
          (change)="toggleFiltro('praAssistir')"
        />
        Pra assistir
      </label>
      <label for="ja-assistido">
        <input 
          type="checkbox" 
          id="ja-assistido" 
          [checked]="filtros.jaAssistido"
          (change)="toggleFiltro('jaAssistido')"
        />
        Já assisti
      </label>
    </div>
    <button 
      class="btn-limpar-filtros" 
      (click)="limparFiltros()"
      *ngIf="filtros.assistido || filtros.praAssistir || filtros.jaAssistido"
    >
      Limpar Filtros
    </button>
  </div>
  <div class="conteudo-lista">
    <div class="grid-filmes" *ngIf="filmes.length > 0">
      <a
        class="card-filme"
        *ngFor="let filme of filmes; let i = index"
        [routerLink]="['/filme', filme.id]"
      >
        <img [src]="filme.poster_url" [alt]="filme.title" />
        <div class="info-filme">
          <strong>{{ i + 1 }}. {{ filme.title }}</strong><br />
          <span class="data-filme">{{ filme.release_date }}</span><br />
          Sinopse: {{ filme.overview | slice:0:100 }}...
        </div>
      </a>
    </div>
    <div class="sem-filmes" *ngIf="filmes.length === 0">
      <div class="mensagem-sem-filmes">
        <h3>Nenhum filme encontrado</h3>
        <p *ngIf="filtros.assistido || filtros.praAssistir || filtros.jaAssistido">
          Tente ajustar os filtros ou adicionar mais filmes à sua lista.
        </p>
        <p *ngIf="!filtros.assistido && !filtros.praAssistir && !filtros.jaAssistido">
          Você ainda não tem filmes na sua lista. Que tal adicionar alguns?
        </p>
      </div>
    </div>
  </div>
</div>
